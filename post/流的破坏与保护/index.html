<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="luoyelusheng,前端技术开发">
<meta name="description" content="前端技术开发,React">
<meta name="author" content="luoyelusheng">
<meta property="og:locale" content="zh_CN">
<meta property="og:type" content="website">
<meta property="og:title" content="落叶卢生 - 前端技术开发落叶卢生 - 前端技术开发">
<meta property="og:type" content="article">
<meta property="og:url" content="https://luoyelusheng.com">
<meta property="og:description" content="前端技术开发">
<meta property="og:image" content="https://luoyelusheng.com/media/images/home-bg.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="落叶卢生 - 前端技术开发落叶卢生 - 前端技术开发">
<meta name="twitter:description" content="前端技术开发">
<meta name="twitter:url" content="https://luoyelusheng.com">
<meta name="twitter:image" content="https://luoyelusheng.com/media/images/home-bg.jpg">
<title>
  流的破坏与保护 | 落叶卢生
</title>
<link href="//cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<!-- <link href="https://luoyelusheng.com/media/css/bootstrap.min.css" rel="stylesheet"> -->
<!--  <link href="https://luoyelusheng.com/media/css/all.min.css" rel="stylesheet" type="text/css"> -->
<link href="//cdn.staticfile.org/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link
  href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
  rel='stylesheet' type='text/css'>
<link rel="alternate" type="application/rss+xml" title="流的破坏与保护 | 落叶卢生 » Feed"
  href="https://luoyelusheng.com/atom.xml">
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
<link href="https://cdn.jsdelivr.net/gh/luoyelusheng/luoyelusheng.github.io//styles/main.css" rel="stylesheet">
<style>
  .post-friend {
    margin: 0 100px;
  }

  .friend-box {
    float: left;
    width: calc(50% - 20px);
    margin: 15px 10px;
  }

  img.friend-avatar {
    width: 70px;
    height: 70px;
    border-radius: 50% !important;
    float: left;
    margin: 0 15px 0 0 !important;
  }

  .flink-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 70px;
    overflow: hidden;
    line-height: 24px;
  }
</style>
<script src="//cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/highlight.min.js"></script>
<!-- <script src="https://luoyelusheng.com/media/scripts/jquery.min.js"></script> -->
<script>hljs.initHighlightingOnLoad();</script>

    <meta property="og:description" content="流的破坏与保护" />
    <meta property="og:url" content="https://luoyelusheng.com/post/流的破坏与保护/" />
    <meta property="og:locale" content="zh-CN" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="落叶卢生" />
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="https://luoyelusheng.com">
        落叶卢生
      </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
        data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
        aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          
            <li class="nav-item">
              
                  <a class="nav-link" href="/">
                    首页
                  </a>
                  
            </li>
            
            <li class="nav-item">
              
                  <a class="nav-link" href="/archives">
                    归档
                  </a>
                  
            </li>
            
            <li class="nav-item">
              
                  <a class="nav-link" href="/tags">
                    标签
                  </a>
                  
            </li>
            
            <li class="nav-item">
              
                  <a class="nav-link" href="/friends">
                    友链
                  </a>
                  
            </li>
            
            <li class="nav-item">
              
                  <a class="nav-link" href="/post/about">
                    关于
                  </a>
                  
            </li>
            
        </ul>
      </div>
    </div>
  </nav>
  <!-- Page Header -->
  <header class="masthead" style="background-image: url('https://luoyelusheng.com/post-images/流的破坏与保护.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <span class="tags">
              
                <a href="https://luoyelusheng.com/tag/k7RscZHCa/" class="tag">
                  CSS世界
                </a>
                
            </span>
            <h1>
              流的破坏与保护
            </h1>
            <span class="meta">
              Posted on
              2019-02-13，10 min read
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <h2 id="前言">前言</h2>
<p>流的破坏和保护，可能大家一想到的就是<code>float</code>与<code>clear</code>，并且认为<code>float</code>的出现就是为了解决布局问题的，但实际上这并不是它的本意，它的本质是为了实现文字环绕效果，即文字环绕图片显示的效果，很显然，从<code>float</code>的设计初衷来看，当下哪些漫天飞舞的浮动属性完全是滥用了。</p>
<h3 id="float的特性">float的特性</h3>
<ul>
<li>包裹性</li>
<li>块状化并格式化上下文</li>
<li>破坏文档流</li>
<li>没有任何<code>margin</code>合并</li>
</ul>
<p>一旦元素的<code>float</code>的属性值不为<code>none</code>，则<code>display</code>的计算值就是<code>block</code>或<code>table</code>,所以不要出现设置浮动后还设置<code>display:block</code>这样的组合，下面是常见的<code>float</code>和<code>display</code>转换表：<br>
<img src="https://luoyelusheng.com/post-images/1634479734471.png" alt="" loading="lazy"></p>
<h3 id="float的天然克星clear">float的天然克星clear</h3>
<p>一般我们设置浮动属性后，都会设置<code>clear</code>属性清楚浮动造成后面的元素的影响，<code>clear</code>属性的官方解释就是：元素盒子的边不能和前面的浮动元素相邻。下面我们来看一个例子：</p>
<pre><code>HTML:
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
CSS:
li{
    width:20px;height:20px;
    margin:5px;
    float:left;
}
li:nth-of-type(3){
    clear:both;
}
</code></pre>
<p>效果：</p>
<div id="demo-1">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</div>
<p>这里的第三个设置清楚浮动，并且是<code>both</code>,讲道理，<code>li</code>显示应该是3行，但实际显示的却是两行，原因在于，<code>clear</code>属性是让自身不能和前面的浮动元素相邻，注意这里的&quot;前面的&quot;三个字，也就是<code>clear</code>属性对后面的元素是不闻不问的，因此才显示两行而不是三行。更进一步，考虑到<code>float</code>属性不是<code>left</code>就是<code>right</code>,不可能同时存在，同时由于<code>clear</code>属性对“后面的”浮动元素不闻不问，因此设置<code>clear:right</code>有效的时候，必然<code>clear:left</code>必然无效，也就是此时的<code>clear:left</code>等同于设置<code>clear:both</code>，因此，在平时使用的过程中，直接使用<code>both</code>属性就好。</p>
<p><code>clear</code>属性只有块级元素才有效，而::after等伪元素默认都是内联水平，这就是借助于伪元素清除浮动元素影响需要设置<code>display</code>属性值的原因。</p>
<pre><code>.clear:after{
    content:&quot;&quot;;
    display:block;//也可以是table，list-item
    clear:both;
}
</code></pre>
<h3 id="css世界的结界bfc">CSS世界的结界——BFC</h3>
<p>BFC全称为<code>block formatting context</code>，中文名为“块状格式化上下文”，相对应的还有IFC,也就是“内联格式化上下文”，本节主要研究BFC。<br>
关于BFC的特性，可以将其称为“css世界的结界”，有点类似于神话中的结界一样，结界内的元素无论怎么翻江倒海，都不可能影响结界外的元素，所以BFC元素不可能发生margin重叠，因为重叠会影响到外面的元素，BFC元素也可以清除浮动的影响。</p>
<p>常见触发BFC的情况：</p>
<ul>
<li><code>&lt;html&gt;</code>根元素;</li>
<li><code>float</code>的值不为<code>none</code>;</li>
<li><code>overflow</code>的值为<code>auto、scroll</code>或<code>hidden</code>;</li>
<li><code>display</code>的值为<code>table-cell</code>、<code>table-caption</code>和<code>inline-block</code>中的任何一个;</li>
<li><code>position</code>的值不为<code>relative</code>和<code>static</code>。</li>
</ul>
<h3 id="overflow的不兼容">overflow的不兼容</h3>
<p>直接上代码：</p>
<pre><code>HTML：
&lt;div class=&quot;box&quot;&gt;
    &lt;img src=&quot;1.jpg&quot; width=&quot;256&quot; height=&quot;192&quot;&gt;
&lt;/div&gt;
CSS：
.box {
    width: 200px; height: 80px;
    margin: auto;
    padding: 10px;
    border: 10px solid;
    overflow: hidden;
}
</code></pre>
<p>当鼠标向下滚动的时候，chrome变现与其他浏览器表现不一致，具体表现在chrome浏览器下面会有<code>10px</code>的空白，IE和火狐则没有。</p>
<figure data-type="image" tabindex="1"><img src="https://luoyelusheng.com/post-images/1634481914806.png" alt="" loading="lazy"></figure>
<center>chrome浏览器</center>
<figure data-type="image" tabindex="2"><img src="https://luoyelusheng.com/post-images/1634481928485.png" alt="" loading="lazy"></figure>
<center>IE浏览器</center>
<p>原理则是在chrome浏览器下，如果容器可滚动（假设是垂直滚动），则<code>padding-bottom</code>也算在滚动尺寸之内，IE和火狐则会忽略<code>padding-bottom</code>。所以为了减少不必要的麻烦，尽量避免滚动容器设置<code>padding-bottom</code>值。</p>
<h3 id="overflow的依赖样式">overflow的依赖样式</h3>
<p>我们常用的单行文本溢出显示点点效果，虽然核心技术是<code>text-overflow:eliipsis</code>，但是要想实现这种效果，必须申明以下3个：</p>
<pre><code>.ell{
    text-overflow:ellipsis;
    white-word:nowrap;
    overflow:hidden;
}
</code></pre>
<h3 id="无依赖绝对定位">无依赖绝对定位</h3>
<p>包含快这个概念简单解释就是元素用来计算和定位的一个框。下面是包含快的常用计算规则：</p>
<ul>
<li>根元素（很多场景下可以看成是<html>）被称为“初始包含快”，其尺寸等同于浏览器可视窗口的大小。</li>
<li>对于其他元素，如果该元素的<code>position</code>是<code>relative</code>或者<code>static</code>,则包含快由最近的块容器祖先盒的<code>content box</code>边界组成。</li>
<li>如果元素<code>position:fixed</code>，则包含快是初始包含快。</li>
<li>如果元素<code>position:absolute</code>，则包含快由最近的<code>position</code>不为<code>static</code>的祖先元素建立，具体规则如下；</li>
</ul>
<p>如果该祖先元素是纯<code>inline</code>元素，则规则略微复杂：</p>
<ul>
<li>假设给内联元素的前后各生成一个宽度为0的内联盒子（inline box），则这两个内联盒子的padding box外面的包围盒就是内联元素的“包含快”；</li>
<li>如果该内联元素被跨行分割了，那么“包含快”是未定义的，也就是css2.1规范 并没有明确定义，浏览器自行发挥。<br>
否则，“包含快”有该祖先的padding box边界形成。</li>
</ul>
<p>如果没有符合条件的包含快，则“包含快”就是“初始包含快”。</p>
<p>思考这样一个问题：一个绝对定位元素，没有任何<code>left/top/right/bottom</code>属性设置，并且其祖先元素全部都是非定位元素，其位置在哪里？</p>
<p>很多人都认为是浏览器窗口的左上方，实际上，还是当前位置，不是浏览器的左上方。</p>
<p>考虑下面这样一个例子：</p>
<p>下图左上角需要一个<code>TOP1</code>的图像标志，请问如何布局？<br>
想必大多数都是这样的：</p>
<pre><code>.father{
    position:relative;
}
.shap{
    positiong:absolute;
    top:0;left:0;
}
</code></pre>
<p>实际上只需要一行代码就可以了，不信？点击<a href="http://demo.cssworld.cn/6/5-4.php">demo</a>测试即可。</p>
<pre><code>.shap{
    positiong:absolute;
}
</code></pre>
<p>看到没有，这种不需要<code>position:relative</code>或者其他属性就可以实现，我们把这种没有<code>left/top/right/bottom</code>属性值的绝对定位简称为“无依赖绝对定位”，我们还可以将其运用在表单验证提示语中。<br>
有下图的一个表单psd文稿：<br>
<img src="https://luoyelusheng.com/post-images/1634482109360.png" alt="" loading="lazy"><br>
一般来说在注册的时候客户端都需要验证一番，从而减少用户出错，验证提示信息都是放在填写表单每一个行的后面，假设提示文字内容元素的类名是<code>remark</code>，则有css代码如下：</p>
<pre><code>.remark{
    position:absolute;
    margin-left:10px;
}
</code></pre>
<p>详细<a href="http://demo.cssworld.cn/6/5-6.php">demo</a>可点击查看。</p>
<h3 id="重新认识clip属性">重新认识clip属性</h3>
<p>很多人都不知道css中还有就地剪裁属性，其基本语法为：</p>
<p><code>clip：rect(top,right,bottom,left)</code></p>
<p>当然其生效的前提是元素必须会绝对定位或者固定定位，也就是<code>position</code>的属性值必须是<code>absolute</code>或者<code>fixed</code>。</p>
<p>其主要运用在两个重要的场景。</p>
<p>1.fixed固定定位的剪裁<br>
对于普通元素，我们想要对齐进行剪裁，我们可以利用语义更明显的<code>overflow</code>属性，但是对于<code>position:fixed</code>元素，<code>overflow</code>属性往往就是失效了，因为固定定位的包含块是根元素，所以这时候<code>clip</code>属性就可以大展身手了。例如：</p>
<pre><code>.fixed-clip{
    position:fixed;
    clip:rect(30px 200px 20px 10px);
}
</code></pre>
<p>2.最佳可访问性隐藏<br>
所谓“可访问性隐藏”，指的是虽然肉眼看不见，但是其他辅助性设备却能够识别和访问的隐藏。</p>
<p>比如，很多网站为了SEO优化，往往会在自己的网站的标识，即logo旁边使用标签写上自己网站的名词，代码如下：</p>
<pre><code>&lt;a href=&quot;/&quot; class=&quot;logo&quot;&gt;
    &lt;h1&gt;hello world!&lt;/h1&gt;
&lt;/a&gt;
</code></pre>
<p>如何隐藏标签中的文字，一般有以下技术选型：</p>
<ul>
<li>最简单的是<code>display:none</code>或者<code>visibility:hidden</code>，但是屏幕阅读器会忽略这里的文字。</li>
<li><code>text-indent</code>是稍微好一点的中策之计，但是缩进太大，屏幕阅读器也会忽略。</li>
<li><code>color:transparent</code>移动端上策之选，但是桌面端却是中策之选，毕竟ie8并不支持透明颜色。</li>
<li><code>clip</code>隐藏测试最佳实践，移动桌面支持都良好。</li>
</ul>
<pre><code>.logo h1{
    positiong:absolute;
    clip:rect(0 0 0 0);
}
</code></pre>
<h3 id="absolute的marginauto居中">absolute的margin:auto居中</h3>
<p>实现一个元素的水平垂直居中，我们常用的便是这样：</p>
<pre><code>.el{
    width:400px;
    height:400px;
    position:absolute;
    left:50%;
    right:50%;
    margin-left:-200px;
    margin-top:-200px;
}

</code></pre>
<p>兼容奇好，IE7也支持，但是明显有一个缺点，<code>margin</code>和元素的宽高耦合了。<br>
第二个方案则是通过<code>transform</code>实现：</p>
<pre><code>.el{
    width:400px;
    height:400px;
    position:absolute;
    left:50%;
    right:50%;
    transform:translate(-50%,-50%);
}
</code></pre>
<p>这里的耦合问题解决了，但是百分比的<code>transform</code>会让iOS微信闪退，这里也不推荐。<br>
第三种就是最佳实践了：</p>
<pre><code>.el{
    width:400px;
    height:400px;
    position:absolute;
    left:0;
    right:0;
    bottom:0;
    top:0;
    margin:auto;
}
</code></pre>
<p>通过<code>margin</code>自动平分，可以说最佳了，但是不兼容IE8，所以视情况而定吧。</p>
<style>
#demo-1 li{
    width:20px;height:20px;
    margin:5px;
    float:left;
    background-color: #000;
    list-style: none;
}
#demo-1 li:nth-of-type(3){
    clear:both;
}
#demo-1:after{
    content: '';
    clear: both;
    display: table;
}
</style>
<p>参考自<a href="http://www.cssworld.cn/">《css世界》</a></p>

            
              <div style="margin:30px 0;">
                <div>作者：落叶卢生
                </div>
                <div>链接：https://luoyelusheng.com/post/流的破坏与保护
                </div>
                <div>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div>
              </div>
              
                
                  <p class="next-post">下一篇：
                    <a href="https://luoyelusheng.com/post/盒尺寸四大家族/">
                      <span class="post-title">
                        盒尺寸四大家族&rarr;
                      </span>
                    </a>
                  </p>
                  
                    <div class="comment">
                      
                        
                              
                                <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
<div id="disqus_thread"></div>
<script>
var options = {
  shortname: 'luoyelusheng-cn',
  apikey: 'o2gOKxZFBHsfnsHjyfApqGKcxmCzh0AnIbWjenxajSj6gMmPVDRedqIyIudUn8xa',
}
if ('https://disqus.skk.moe/disqus/') {
  options.api = 'https://disqus.skk.moe/disqus/'
}
var dsqjs = new DisqusJS(options)
</script>

                                  
                                    
                    </div>
        </div>
      </div>
  </article>
  <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
            
              <li class="list-inline-item">
                <a href="https://github.com/luoyelusheng" target="_blank">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              
                
            
              <li class="list-inline-item">
                <a href="https://twitter.com/luoyelusheng" target="_blank">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              
                
            
                
            
                
            
                
            
              <li class="list-inline-item">
                <a href="https://www.instagram.com/luoyelusheng" target="_blank">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              
                
            
                
                  <li class="list-inline-item">
                    <a href="https://luoyelusheng.com/atom.xml" target="_blank">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
        </ul>
        <p class="copyright text-muted">Copyright &copy;<span>
            落叶卢生
          </span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
      </div>
    </div>
  </div>
</footer>
<!-- Bootstrap core JavaScript -->
<script src="//cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<!-- <script src="https://luoyelusheng.com/media/scripts/bootstrap.bundle.min.js"></script> -->
<!-- Bootstrap core JavaScript -->
<script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
<!-- <script src="https://luoyelusheng.com/media/scripts/clean-blog.min.js"></script> -->
<script src="//instant.page/3.0.0" type="module" defer
  integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<style type="text/css">
  a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-property: background-color;
    display: none
  }

  a.back_to_top span {
    color: #888
  }

  a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf
  }

  a.back_to_top:hover span {
    color: #555
  }

  @media print,
  screen and(max-width:580px) {
    .back_to_top {
      display: none !important
    }
  }
</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: 0
          },
            800);
          return false
        })
      }
    }
  })(this));</script>
</body>

</html>